<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instagram Clone</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/media-queries.css" />
    <link rel="icon" href="photos/insta-icon.jpg" />
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js"></script>
</head>
<body>
    <main>
        <div class="log-in-container">
            <div class="log-in">
                <img src="https://github.com/Arunjagan12/INSTAGRAM-login-page-clone/blob/main/photos/logo.png?raw=true" class="logo"/>
                <div class="log-in-form">
                    <input type="text" id="email" placeholder="Phone number, username or email" />
                    <input type="password" id="password" placeholder="Password" />
                    <button class="log-in-button" onclick="login()">Log In</button>
                </div>
                <span class="or-divider">OR</span>
                <div class="fb-login">
                    <a href="#">
                        <img src="https://github.com/Arunjagan12/INSTAGRAM-login-page-clone/blob/main/photos/facebook-icon.png?raw=true">
                        <span>Log in with Facebook</span>
                    </a>
                </div>
                <a href="#" onclick="forgotPassword()">Forgot password?</a>
            </div>
            <div class="sign-up">
                <span>Don't have an account? <a href="#">Sign up</a></span>
            </div>
            <div class="get-the-app">
                <span>Get the app</span>
                <div class="app-images">
                    <a href="#"><img src="https://github.com/Arunjagan12/INSTAGRAM-login-page-clone/blob/main/photos/applestore.png?raw=true" /></a>
                    <a href="#"><img src="https://github.com/Arunjagan12/INSTAGRAM-login-page-clone/blob/main/photos/googlestore.png?raw=true" /></a>
                </div>
            </div>
        </div>
        <div class="phones-container">
            <img src="photos/phones.png" />
        </div>
    </main>
    <footer>
        <ul class="footer-links">
            <li><a href="#">ABOUT</a></li>
            <li><a href="#">HELP</a></li>
            <li><a href="#">PRESS</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">JOBS</a></li>
            <li><a href="#">PRIVACY</a></li>
            <li><a href="#">TERMS</a></li>
            <li><a href="#">LOCATION</a></li>
            <li><a href="#">TOP</a></li>
            <li><a href="#">ACCOUNTS</a></li>
            <li><a href="#">HASHTAGS</a></li>
            <li><a href="#">LANGUAGE</a></li>
        </ul>
        <span class="copyright">&copy; 2024 INSTAGRAM FROM FACEBOOK</span>
    </footer>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBP-Rzuf6qBZb0gE9lNe21Iu0XQTgFyf8c",
            authDomain: "instagram-3d912.firebaseapp.com",
            databaseURL: "https://instagram-3d912-default-rtdb.firebaseio.com",
            projectId: "instagram-3d912",
            storageBucket: "instagram-3d912.appspot.com",
            messagingSenderId: "284335250272",
            appId: "1:284335250272:web:a2353bab44b5f0fff05c05",
            measurementId: "G-CZE37WK2K3"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        
        // Function to login user
        function login() {
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            
            if (email === "" || password === "") {
                alert("Please fill in all fields!");
                return;
            }
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    saveUserToDatabase(user);
                    alert("Login successful!");
                    window.location.href = "home.html";
                })
                .catch((error) => {
                    alert("Error: " + error.message);
                });
        }
        
        // Function to save user details in Firebase Realtime Database
        function saveUserToDatabase(user) {
            database.ref("users/" + user.uid).set({
                email: user.email,
                lastLogin: new Date().toISOString()
            });
        }
        
        // Function for password reset
        function forgotPassword() {
            let email = document.getElementById("email").value;
            if (email === "") {
                alert("Please enter your email to reset password.");
                return;
            }
            
            auth.sendPasswordResetEmail(email)
                .then(() => {
                    alert(`Email sent to ${email}.`);
                })
                .catch((error) => {
                    alert("Error: " + error.message);
                });
        }
    </script>
</body>
</html>
